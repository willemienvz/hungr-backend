<div class="step4-container block-open-top">
  <ng-content select="[header]"></ng-content>

  <app-content-block title="" customClass="rowSpecial block-open-top">
    <!-- Aspect Ratio Instructions -->
    <div class="aspect-ratio-info">
      <div class="info-header">
        <mat-icon>info</mat-icon>
        <h6>Image Requirements</h6>
      </div>
      <div class="info-content">
        <p><strong>Orientation:</strong> Landscape (wider than tall)</p>
        <p><strong>Recommended Dimensions:</strong> 1920x1080, 1280x720, or any landscape format</p>
        <p><strong>File Types:</strong> JPG, PNG, WebP</p>
        <p><strong>Max Size:</strong> 2.5MB</p>
      </div>
    </div>

    <!-- Media Preview with Delete Option -->
    <div *ngIf="uploadedImageUrl" class="media-preview-container">
      <div class="media-preview-strip">
        <img
          [src]="uploadedImageUrl"
          alt="Special preview image"
          class="preview-thumbnail"
        />
        <button 
          type="button" 
          class="btn-remove"
          (click)="onDeleteMedia()"
          title="Remove image"
          aria-label="Remove image"
        >
          Ã—
        </button>
      </div>
    </div>

    <div class="upload-button-container">
      <button type="button" class="hungr-btn hungr-btn-primary" (click)="onOpenImageUploadModal()">
        <mat-icon>upload</mat-icon> {{ uploadedImageUrl ? 'Replace Image' : 'Add Image' }}
      </button>
    </div>
  </app-content-block>
</div>

<!-- Remove Image Confirmation Modal -->
<div class="modal" [class.open]="showDeleteModal">
  <div class="modal-content">
    <div class="modal-header">
      <h6>Remove Image</h6>
      <button type="button" class="close-btn" (click)="onCancelDelete()">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="modal-body">
      <p>Are you sure you want to remove this image?</p>
    </div>
    <div class="modal-actions">
      <button type="button" class="hungr-btn hungr-btn-secondary" (click)="onCancelDelete()">
        Cancel
      </button>
      <button type="button" class="hungr-btn hungr-btn-primary" (click)="onConfirmDelete()" [disabled]="isDeleting">
        <mat-icon *ngIf="isDeleting">hourglass_empty</mat-icon>
        {{ isDeleting ? 'Removing...' : 'Remove' }}
      </button>
    </div>
  </div>
</div> 