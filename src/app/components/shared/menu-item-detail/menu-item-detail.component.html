<!-- KB: Reusable detail section component that can handle preparation, variation, pairing, and side details -->
<div class="details-section">
  <div class="detail-header grid">
    <div class="header-title">
      <h6>{{ config.title }}</h6>
    </div>
    <div class="header-actions">
      <p *ngIf="config.description">{{ config.description }}</p>
      <button type="button" class="toggle-btn" (click)="onCloseDetail()">
        <i class="material-icons">close</i>
      </button>
    </div>
  </div>

  <div class="detail-content grid">
    <!-- KB: Custom heading input field -->
    <div class="custom-heading-input">
      <app-form-input
        type="text"
        placeholder="Custom heading (optional)"
        label="Custom heading for this section"
        [ngModel]="config.customHeading"
        (ngModelChange)="onCustomHeadingChange($event)"
        [ngModelOptions]="{ standalone: true }">
      </app-form-input>
    </div>
    
    <!-- KB: Optional description text, only shown if provided in config -->
    
    <div class="add-input-group">
      <div class="detail-input-wrapper">
        <app-form-input
          type="text"
          [placeholder]="config.placeholder"
          [ngModel]="newItemValue"
          (ngModelChange)="onNewItemValueChange($event)"
          [ngModelOptions]="{ standalone: true }"
          (keyup.enter)="onAddItem()">
        </app-form-input>
        
        <!-- KB: Optional price input for items -->
        <div *ngIf="config.showPricing" class="price-input-container">
          <app-price-input
            label=""
            placeholder="R 0.00"
            [required]="false"
            [(ngModel)]="newItemPrice"
            [ngModelOptions]="{ standalone: true }"
            (keyup.enter)="onAddItem()"
            class="compact">
          </app-price-input>
        </div>
        
        <button 
          type="button"
          class="add-detail-btn"
          (mousedown)="$event.preventDefault()"
          (click)="onAddItem(); $event.stopPropagation()"
          [disabled]="!newItemValue || newItemValue.trim() === ''">
          <app-svg-icon 
            iconName="plus" 
            size="16px" 
            [color]="'var(--button-primary-color)'">
          </app-svg-icon>
        </button>
      </div>
    </div>
    <div class="item-list">
      <div
        class="item-tag"
        *ngFor="let item of items; let i = index"
      >
      <div class="item-tag-content">
        <span>{{ getItemDisplayName(item) }}</span>
        <span *ngIf="hasItemPrice(item)" class="item-price">+ {{ getItemDisplayPrice(item) }}</span>
      </div>
        <button type="button" class="remove-btn" (click)="onRemoveItem(i)">
          <i class="material-icons">close</i>
        </button>
      </div>
    </div>
  </div>
</div>
